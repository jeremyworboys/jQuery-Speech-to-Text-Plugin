(function(a){a.speechToText=function(b,c){var d=this;d.$el=a(b);d.el=b;d.$el.data("speechToText",d);d.init=function(){d.options=a.extend({},a.speechToText.defaultOptions,c);a("<style>.speechToText-input-reset{background:transparent;border:none;cursor:pointer;font-size:1em;height:1em;margin-left:5px;outline:none;position:absolute;width:1em;}</style>").appendTo("head")};d.init()};a.speechToText.defaultOptions={inputResetClass:null};a.fn.speechToText=function(b){var c=new a.speechToText(this,b);return this.each(function(b,d){var e=a(d);if(d.tagName=="TEXTAREA"){e.after(a("<input />").attr("type","text").attr("x-webkit-speech","x-webkit-speech").addClass("speechToText-input-reset").addClass(c.options.inputResetClass).bind("webkitspeechchange",function(){var b=a(this).val().length*2;d.value=this.value;this.value="";d.focus();if(d.setSelectionRange){d.setSelectionRange(b,b)}else{e.val(e.val())}d.scrollTop=999999}))}else{e.attr("x-webkit-speech","x-webkit-speech")}})}})(jQuery)